<h1>Iniciar sesión</h1>

<form [formGroup]="loginForm" (ngSubmit)="login()">
  <div class="form-group row">
    <label class="col-2 col-form-label">Clave de usuario</label>
    <div class="col-8">
      <input
        class="form-control"
        type="text"
        placeholder="Tu clave o ID de usuario"
        formControlName="name"
        name="name"
        [(ngModel)]="user.name"
        [ngClass]="{'is-invalid': !loginForm.get('name').valid && attemptedToLogin}"
      />
    </div>
  </div>
  <div
    *ngIf="loginForm.controls['name'].errors?.required && attemptedToLogin"
    class="form-control-feedback"
  >
    Por favor introduce tu clave de usuario
  </div>
  <div
    *ngIf="loginForm.controls['name'].errors?.minlength && attemptedToLogin"
    class="form-control-feedback"
  >
    La clave de usuario debe ser de al menos 5 caracteres
  </div>
  <div
    *ngIf="loginForm.controls['name'].errors?.maxlength && attemptedToLogin"
    class="form-control-feedback"
  >
    La clave de usuario no puede exceder los 10 caracteres
  </div>

  <div class="form-group row">
    <label class="col-2 col-form-label">Contraseña</label>
    <div class="col-8">
      <input
        class="form-control"
        type="password"
        placeholder="Tu contraseña super segura"
        formControlName="password"
        name="password"
        [(ngModel)]="user.password"
        [ngClass]="{
          'is-invalid': !loginForm.get('password').valid && attemptedToLogin
        }"
      />
    </div>
  </div>
  <div
    *ngIf="loginForm.controls['password'].errors?.required && attemptedToLogin"
    class="form-control-feedback"
  >
    Ah no, sin contraseña no hay acceso 🙅‍♀️
  </div>
  <div
    *ngIf="loginForm.controls['password'].errors?.minlength && attemptedToLogin"
    class="form-control-feedback"
  >
    Contraseña muy corta 🤷‍♀️
  </div>
  <div
    *ngIf="loginForm.controls['password'].errors?.maxlength && attemptedToLogin"
    class="form-control-feedback"
  >
    Contraseña muy larga 🤷‍♀️
  </div>

  <div class="form-group row">
    <label class="col-2 col-form-label">&nbsp;</label>
    <div class="input-group col-md-8">
      <button
        type="submit"
        class="btn btn-outline-primary"
        [disabled]="!loginForm.valid && attemptedToLogin"
        (click)="authUser()"
      >
        Iniciar sesión
      </button>
    </div>
  </div>
</form>
